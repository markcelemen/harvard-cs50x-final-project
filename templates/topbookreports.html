{% extends "reports.html" %}

{% block title %}
Top 10 Books
{% endblock %}

{% block main %}
    <!-- Form Section -->
    <h2>Top 10 Books</h2>
    <form action="/top_books" method="POST">
        <label>Entire Year or Month:
            <select name="month">
                <option value="0" {% if month == 0 %}selected{% endif %}>Entire 2024</option>
                <option value="1" {% if month == 1 %}selected{% endif %}>January</option>
                <option value="2" {% if month == 2 %}selected{% endif %}>February</option>
                <option value="3" {% if month == 3 %}selected{% endif %}>March</option>
                <option value="4" {% if month == 4 %}selected{% endif %}>April</option>
                <option value="5" {% if month == 5 %}selected{% endif %}>May</option>
                <option value="6" {% if month == 6 %}selected{% endif %}>June</option>
                <option value="7" {% if month == 7 %}selected{% endif %}>July</option>
                <option value="8" {% if month == 8 %}selected{% endif %}>August</option>
                <option value="9" {% if month == 9 %}selected{% endif %}>September</option>
                <option value="10" {% if month == 10 %}selected{% endif %}>October</option>
                <option value="11" {% if month == 11 %}selected{% endif %}>November</option>
                <option value="12" {% if month == 12 %}selected{% endif %}>December</option>
            </select>
        </label>
        <button type="submit">Generate</button>
    </form>

    <!-- Top 10 Most Borrowed Books Table -->
    {% if top_books %}
        <h3>Results</h3>
        <table>
            <thead>
                <tr>
                    <th>Book ID</th>
                    <th>Title</th>
                    <th>Publication Year</th>
                    <th>Author</th>
                    <th>Publisher</th>
                    <th>Status</th>
                    <th>Borrow Count</th>
                </tr>
            </thead>
            <tbody>
                {% for book in top_books %}
                    <tr>
                        <td>{{ book.book_id }}</td>
                        <td>{{ book.title }}</td>
                        <td>{{ book.publication_year }}</td>
                        <td>{{ book.author_first_name }} {{ book.author_last_name }}</td>
                        <td>{{ book.publisher_name }}</td>
                        <td>{{ book.availability_status }}</td>
                        <td>{{ book.borrow_count }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% endif %}
{% endblock %}
